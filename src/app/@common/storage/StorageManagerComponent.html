<div class="header accent p-24" fxLayout="column" fxLayoutAlign="space-between start">
    <div fxFlex fxLayout="row" class="breadcrumb h1">
        <div fxLayout="row" fxLayoutAlign="start center" *ngFor="let path of breadcrumbs">
            <span class="pointer" (click)="load(path.path)">{{ path.name }} </span
            ><!----><mat-icon class="separator">chevron_right</mat-icon>
        </div>
    </div>
    <button class="add-button" mat-fab color="warn" [matMenuTriggerFor]="menu">
        <mat-icon>add</mat-icon>
    </button>
    <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="createFolder()">
            <mat-icon>folder</mat-icon>
            <span>Создать папку</span>
        </button>
        <button mat-menu-item (click)="upload()">
            <mat-icon>attachment</mat-icon>
            <span>Загрузить файл</span>
            <input (change)="fileChange($event)" type="file" hidden #fileInput />
        </button>
    </mat-menu>
</div>
<div class="content">
    <mat-table [dataSource]="Items" matSort>
        <ng-container matColumnDef="select">
            <mat-header-cell *matHeaderCellDef></mat-header-cell>
            <mat-cell *matCellDef="let element"> </mat-cell>
        </ng-container>
        <ng-container matColumnDef="icon">
            <mat-header-cell *matHeaderCellDef></mat-header-cell>
            <mat-cell *matCellDef="let element">
                <ng-container *ngIf="element.IsDirectory"
                    ><mat-icon class="folder">folder</mat-icon>
                </ng-container>
                <ng-container *ngIf="!element.IsDirectory">
                    <ng-container [ngSwitch]="element.Item.Type">
                        <ng-container *ngSwitchCase="1">
                            <img
                                style="width: 80%;
                            /* margin: 10px; */
                            background: #e5e0e0;
                            padding: 3px;"
                                [src]="element.Item.PictureInfo.SmallThumbnail.PublicUri"
                            />
                        </ng-container>
                        <ng-container *ngSwitchCase="2">
                            <mat-icon>attachment</mat-icon>
                        </ng-container>
                    </ng-container>
                </ng-container>
            </mat-cell>
        </ng-container>
        <ng-container matColumnDef="title">
            <mat-header-cell *matHeaderCellDef mat-sort-header> Название</mat-header-cell>
            <mat-cell *matCellDef="let element">
                <span class="pointer" (click)="enter(element)">{{ element.Name }}</span></mat-cell
            >
        </ng-container>
        <ng-container matColumnDef="size">
            <mat-header-cell *matHeaderCellDef mat-sort-header>Размер</mat-header-cell>
            <mat-cell *matCellDef="let element">
                <ng-container *ngIf="!element.IsDirectory">{{
                    element.Item.FileSize | fileSize
                }}</ng-container>
            </mat-cell>
        </ng-container>
        <ng-container matColumnDef="date">
            <mat-header-cell *matHeaderCellDef mat-sort-header>Дата</mat-header-cell>
            <mat-cell *matCellDef="let element">
                <ng-container *ngIf="!element.IsDirectory">
                    {{ element.Item.DateUpdated | amFromUtc }}
                </ng-container>
            </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="columnsToDisplay"></mat-header-row>
        <mat-row *matRowDef="let row; columns: columnsToDisplay"></mat-row>
    </mat-table>
</div>
