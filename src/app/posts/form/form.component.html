<div class="page-layout blank bg-white inner-scroll" *ngIf="formLoaded">
    <mat-sidenav-container>
        <mat-sidenav-content fxFlex>
            <div class="editor p-24" brcPerfectScrollbar>
                <text-input
                    [FormGroup]="Form.FormGroup"
                    FieldName="Title"
                    Label="Название"
                ></text-input>
                <blocksForm [Model]="model" [Form]="Form"></blocksForm>
            </div>
        </mat-sidenav-content>
        <mat-sidenav #sidenav mode="side" opened class="p-24" position="end">
            <div>
                <button
                    mat-raised-button
                    color="primary"
                    type="submit"
                    (click)="save()"
                    [ngClass]="{
                        invalid: Form.FormGroup.invalid,
                        'no-changes': !Form.hasChanges
                    }"
                    [disabled]="Form.FormGroup.invalid || !Form.hasChanges || Form.inProgress"
                >
                    Сохранить
                </button>
                &nbsp;
                <button
                    mat-raised-button
                    color="accent"
                    (click)="changePublishState()"
                    *ngIf="!model.IsPublished"
                    [disabled]="Form.FormGroup.invalid || Form.hasChanges || Form.inProgress"
                >
                    Опубликовать
                </button>
                <button
                    mat-raised-button
                    color="warn"
                    (click)="changePublishState()"
                    *ngIf="model.IsPublished"
                    [disabled]="Form.FormGroup.invalid || Form.hasChanges || Form.inProgress"
                >
                    Спрятать
                </button>
            </div>
            <text-input
                [FormGroup]="Form.FormGroup"
                FieldName="Url"
                Label="Адрес на сайте"
            ></text-input>
            <chips-input
                [FormGroup]="Form.FormGroup"
                FieldName="SectionIds"
                Label="Разделы"
                TitleField="Title"
                ValueField="Id"
                [Options]="Sections"
            ></chips-input>
            <chips-input
                [FormGroup]="Form.FormGroup"
                FieldName="TagIds"
                Label="Тэги"
                TitleField="Name"
                ValueField="Id"
                [Creatable]="true"
                [EntitiesService]="servicesProvider.TagsService"
                [Options]="Tags"
            ></chips-input>
        </mat-sidenav>
    </mat-sidenav-container>
</div>
